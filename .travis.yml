language: ruby

rvm:
  - 2.1
  - 2.2
  - 2.3.1
  - 2.4
  - 2.5
  - 2.6

gemfile:
  - gemfiles/rails_5.0.gemfile
  - gemfiles/rails_4.2.gemfile
  - gemfiles/rails_4.1.gemfile

matrix:
  exclude:
    - rvm: 2.1
      gemfile: gemfiles/rails_5.0.gemfile
    - rvm: 2.4
      gemfile: gemfiles/rails_4.2.gemfile
    - rvm: 2.4
      gemfile: gemfiles/rails_4.1.gemfile
    - rvm: 2.5
      gemfile: gemfiles/rails_4.2.gemfile
    - rvm: 2.5
      gemfile: gemfiles/rails_4.1.gemfile
    - rvm: 2.6
      gemfile: gemfiles/rails_4.2.gemfile
    - rvm: 2.6
      gemfile: gemfiles/rails_4.1.gemfile

before_install:
  - if ruby --version | cut -d ' ' -f 2 | grep -q 2.1.5p273 ; then gem update --system 2.4.8; fi
  - if ruby --version | cut -d ' ' -f 2 | grep -q 2.5.5p157 ; then gem install bundler:1.15.0; fi
